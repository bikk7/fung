(function(e){function t(t){for(var i,r,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)r=s[p],n[r]&&d.push(n[r][0]),n[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],i=!0,s=1;s<o.length;s++){var l=o[s];0!==n[l]&&(i=!1)}i&&(a.splice(t--,1),e=r(r.s=o[0]))}return e}var i={},n={app:0},a=[];function r(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=i,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"012b":function(e,t,o){"use strict";o("96cf");var i=o("3b8d"),n=(o("b6e4"),o("15ac"),o("b05c"),o("63d9"),o("d225")),a=o("b0b4"),r=function(){function e(t){Object(n["a"])(this,e),this.init(t)}return Object(a["a"])(e,[{key:"init",value:function(e){var t={inputCodec:"Int16",channels:1,sampleRate:8e3,flushTime:1e3};this.option=Object.assign({},t,e),this.samples=new Float32Array,this.interval=setInterval(this.flush.bind(this),this.option.flushTime),this.convertValue=this.getConvertValue(),this.typedArray=this.getTypedArray(),this.initAudioContext()}},{key:"getConvertValue",value:function(){var e={Int8:128,Int16:327168,Int32:2147483648,Float32:1};if(!e[this.option.inputCodec])throw new Error("wrong codec.please input one of these codecs:Int8,Int16,Int32,Float32");return e[this.option.inputCodec]}},{key:"getTypedArray",value:function(){var e={Int8:Int8Array,Int16:Int16Array,Int32:Int32Array,Float32:Float32Array};if(!e[this.option.inputCodec])throw new Error("wrong codec.please input one of these codecs:Int8,Int16,Int32,Float32");return e[this.option.inputCodec]}},{key:"initAudioContext",value:function(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=10,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime}},{key:"isSupported",value:function(t){if(!e.isTypedArray(t))throw new Error("请传入ArrayBuffer或者任意TypedArray");return!0}},{key:"feed",value:function(e){this.isSupported(e),e=this.getFormatedValue(e);var t=new Float32Array(this.samples.length+e.length);t.set(this.samples,0),t.set(e,this.samples.length),this.samples=t}},{key:"getFormatedValue",value:function(e){e=e.constructor==ArrayBuffer?new this.typedArray(e):new this.typedArray(e.buffer);for(var t=new Float32Array(e.length),o=0;o<e.length;o++)t[o]=e[o]/this.convertValue;return t}},{key:"volume",value:function(e){this.gainNode.gain.value=e}},{key:"destroy",value:function(){this.interval&&clearInterval(this.interval),this.samples=null,this.audioCtx.close(),this.audioCtx=null}},{key:"flush",value:function(){if(this.samples.length){for(var e=this.audioCtx.createBufferSource(),t=this.samples.length/this.option.channels,o=this.audioCtx.createBuffer(this.option.channels,t,this.option.sampleRate),i=0;i<this.option.channels;i++)for(var n=o.getChannelData(i),a=i,r=50,s=0;s<t;s++)n[s]=this.samples[a],s<50&&(n[s]=n[s]*s/50),s>=t-51&&(n[s]=n[s]*r--/50),a+=this.option.channels;this.startTime<this.audioCtx.currentTime&&(this.startTime=this.audioCtx.currentTime),console.log("start vs current "+this.startTime+" vs "+this.audioCtx.currentTime+" duration: "+o.duration),e.buffer=o,e.connect(this.gainNode),e.start(this.startTime),this.startTime+=o.duration,this.samples=new Float32Array}}},{key:"pause",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.audioCtx.suspend();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"continue",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.audioCtx.resume();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}],[{key:"isTypedArray",value:function(e){return e.byteLength&&e.buffer&&e.buffer.constructor==ArrayBuffer||e.constructor==ArrayBuffer}}]),e}();t["a"]=r},"034f":function(e,t,o){"use strict";var i=o("64a9"),n=o.n(i);n.a},"298d":function(e,t,o){e.exports=o.p+"img/loginPic.8f69d3de.jpg"},3238:function(e,t,o){"use strict"},"3f24":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("cadf"),o("551c"),o("f751"),o("097d");var i=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},a=[],r={name:"app",components:{}},s=r,l=(o("034f"),o("2877")),c=Object(l["a"])(s,n,a,!1,null,null,null),u=c.exports,p=o("8c4f"),d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"home"}},[o("el-container",[o("el-header",{staticStyle:{"background-color":"#ffffff",margin:"0px 0px 0px 0px",height:"70px"}},[o("el-row",[o("el-col",{attrs:{span:3}}),o("el-col",{attrs:{span:10}},[o("h2",{staticStyle:{"text-align":"left"}},[e._v("云伴远程肺音听诊系统")])])],1)],1),o("el-divider",{staticStyle:{width:"100%"}}),o("el-container",[o("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)",margin:"2px 5px 0px 0px"},attrs:{width:"200px"}},[o("el-menu",{attrs:{"default-active":e.activeIndex,router:""}},[o("el-menu-item",{attrs:{index:"/Home/HomePage"}},[o("i",{staticClass:"el-icon-message"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("肺音听诊")])])],1)],1),o("el-main",[o("router-view")],1)],1)],1)],1)},m=[],_={name:"home",data:function(){return{circleUrl:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1566319876268&di=0144317d17547fbe52fb592b4af11ce5&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201803%2F09%2F20180309201807_2EhwS.jpeg",userName:"",logoUrl:o("eb70"),activeIndex:"/Home/HomePage"}},methods:{}},f=_,h=(o("cccb"),Object(l["a"])(f,d,m,!1,null,null,null)),g=h.exports,b=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-row",{attrs:{justify:"end"}},[o("el-button",{attrs:{round:""},on:{click:e.download}},[e._v("下载已选文件")])],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelectionChange}},[e._v(">\r\n    "),o("el-table-column",{attrs:{type:"selection",width:"55"}}),o("el-table-column",{attrs:{fixed:"",prop:"f_id",label:"文件编号",width:"100"}}),o("el-table-column",{attrs:{fixed:"",prop:"p_id",label:"患者编号",width:"100"}}),o("el-table-column",{attrs:{fixed:"",prop:"d_institution",label:"科室",width:"100"}}),o("el-table-column",{attrs:{prop:"f_url",label:"肺音文件",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.view(t.row)}}},[e._v("肺音文件")])]}}])}),o("el-table-column",{attrs:{prop:"descript",label:"肺音类型",width:"100","column-key":"descript",filters:[{text:"干啰音",value:"干啰音"},{text:"湿啰音",value:"湿啰音",value:"正常"}],"filter-method":e.filterTag}}),o("el-table-column",{attrs:{prop:"f_date",label:"采集时间",sortable:"",width:"120"}}),o("el-table-column",{attrs:{prop:"collect_site",label:"采集部位",width:"100"}}),o("el-table-column",{attrs:{prop:"lung_type",label:"诊断结果",width:"100"}}),o("el-table-column",{attrs:{prop:"d_id",label:"采集医生编号",width:"120"}}),o("el-table-column",{attrs:{prop:"image",label:"频谱图",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.show(t.row)}}},[e._v("查看频谱图")])]}}])}),o("el-table-column",{attrs:{prop:"ct_image",label:"CT影像",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.s(t.row)}}},[e._v("查看CT影像")])]}}])}),o("el-table-column",{attrs:{prop:"ct_description",label:"ct影像描述",width:"100"}})],1),o("el-dialog",{attrs:{title:"频谱图",visible:e.imagevisible},on:{"update:visible":function(t){e.imagevisible=t}}},[[o("center",[o("el-image",{attrs:{src:e.i_src}})],1)]],2),o("el-dialog",{attrs:{title:"CT影像",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[[o("center",[o("el-image",{attrs:{src:e.ct_src}})],1)]],2),o("el-dialog",{attrs:{title:"录音播放",visible:e.dialogVisible,"before-close":e.stop},on:{"update:visible":function(t){e.dialogVisible=t}}},[[o("center",[o("audio",{ref:"audio",attrs:{src:e.src,autoplay:"autoplay",controls:"controls"}},[e._v("Your browser does not support the audio element.")])])]],2)],1)},v=[],w=(o("5df3"),o("28a5"),o("ac6a"),o("6b54"),o("bc3a")),y=o.n(w),x=o("f96b"),S=o("c4e3"),k=o.n(S),I=o("21a6"),$=o.n(I),E=function(e){return new Promise(function(t,o){y()({method:"get",url:e,responseType:"arraybuffer"}).then(function(e){t(e.data)}).catch(function(e){o(e.toString())})})},T={name:"voicedata",data:function(){return{src:"",i_src:"",ct_src:"",descript:"",d_id:"",dialogVisible:!1,imagevisible:!1,visible:!1,f_id:"",image:"",p_id:this.$route.params.p_id,p_name:this.$route.params.p_name,p_age:this.$route.params.p_age,p_sex:this.$route.params.p_sex,d_institution:this.$route.params.d_institution,newData:[],tableData:[],multipleSelection:[]}},created:function(){var e=this;void 0==this.$route.params.p_id&&(e.p_id=sessionStorage.getItem("p_id"),e.p_name=sessionStorage.getItem("p_name"),e.p_age=sessionStorage.getItem("p_age"),e.p_sex=sessionStorage.getItem("p_sex"),e.d_institution=sessionStorage.getItem("d_institution")),console.log(e.$route.params),this.$axios.get(x["a"].removeMedicationUrl+"/"+e.p_id).then(function(t){console.log("This is response!"),console.info(t.data),e.newData=t.data,console.info(t.data.length);t.data.length;console.info(e.newData),e.newData.forEach(function(t,o){var i={lung_type:t.lung_type,f_id:t.f_id,image:t.spectrum_image,p_id:e.p_id,p_name:e.p_name,p_age:e.p_age,descript:t.lung_description,p_sex:e.p_sex,d_id:t.collect_d_id,d_institution:e.d_institution,f_url:t.lung_file,f_date:t.collect_time,ct_description:t.ct_description,ct_image:t.ct_image,collect_site:t.collect_site};e.tableData.push(i)}),console.info(e.tableData)}).catch(function(e){console.info(e)}),window.addEventListener("beforeunload",function(){sessionStorage.setItem("p_id",e.p_id),sessionStorage.setItem("p_name",e.p_name),sessionStorage.setItem("p_age",e.p_age),sessionStorage.setItem("p_sex",e.p_sex),sessionStorage.setItem("d_institution",e.d_institution),console.log(sessionStorage.getItem("p_id"))})},methods:{view:function(e){var t=this;t.dialogVisible=!0,console.log(e);var o=e.f_url;t.src=o,console.log(t.src)},show:function(e){var t=this;t.imagevisible=!0,console.log(e),t.i_src=e.image,console.log(t.i_src)},s:function(e){var t=this;t.visible=!0,console.log(e),t.ct_src=e.ct_image,console.log(t.ct_src)},stop:function(){this.dialogVisible=!1,this.$refs.audio.pause(),this.$refs.audio.currentTime=0},filterTag:function(e,t,o){var i=o["property"];return t[i]===e},handleSelectionChange:function(e){this.multipleSelection=e},download:function(){console.log(this.multipleSelection);var e=[];if(this.multipleSelection.forEach(function(t){null!=t.f_url&&e.push(t.f_url)}),console.log(e),0!=e.length){var t=new k.a,o={},i=[];e.forEach(function(e){var n=E(e).then(function(i){var n=e.split("/"),a=n[n.length-1];t.file(a,i,{binary:!0}),o[a]=i});i.push(n)}),Promise.all(i).then(function(){t.generateAsync({type:"blob"}).then(function(e){$.a.saveAs(e,"打包下载.zip")})})}else this.$alert("文件路径不正确","警告",{confirmButtonText:"确定"})}}},C=T,P=Object(l["a"])(C,b,v,!1,null,null,null),O=P.exports,D=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"login"}},[o("el-row",{staticStyle:{height:"50px"}}),o("el-container",[o("el-main",[o("el-row",[o("el-col",{attrs:{span:22,offset:1}},[o("el-card",[o("el-row",[o("el-col",{attrs:{span:18}},[o("el-image",{staticStyle:{height:"500px"},attrs:{src:e.imageUrl,fit:e.fit}})],1),o("el-col",{attrs:{span:5,offset:1}},[o("el-form",{ref:"LoginForm",staticClass:".login-form",staticStyle:{align:"'center'"},attrs:{model:e.LoginForm,rules:e.rule,"label-width":"0"}},[o("h3",{staticStyle:{"font-weight":"bolder","font-size":"larger",marginTop:"80px","margin-bottom":"30px"}},[e._v("登录")]),o("el-form-item",{attrs:{prop:"id"}},[o("el-input",{attrs:{type:"text",placeholder:"请输入电话号码或者电子邮箱"},model:{value:e.LoginForm.id,callback:function(t){e.$set(e.LoginForm,"id",t)},expression:"LoginForm.id"}})],1),o("el-form-item",{attrs:{prop:"pwd"}},[o("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.LoginForm.pwd,callback:function(t){e.$set(e.LoginForm,"pwd",t)},expression:"LoginForm.pwd"}})],1),o("el-form-item",[o("el-button",{staticClass:"submitBtn",attrs:{type:"danger",align:"center",round:""},nativeOn:{click:function(t){return t.preventDefault(),e.submit("LoginForm")}}},[e._v("登录")]),o("el-divider")],1),o("el-divider")],1)],1)],1)],1)],1)],1)],1),o("el-footer",{staticStyle:{marginTop:"30px"}},[o("el-divider",{attrs:{"content-position":"center"}},[e._v("云伴远程肺音听诊系统服务由深圳市深大云伴健康科技有限公司提供")])],1)],1)],1)},F=[],A=(o("4328"),{name:"login",data:function(){var e=this,t=function(t,o,i){""===o?i(new Error("请输入密码")):(""!==e.LoginForm.checkPass&&e.$refs.LoginForm.validateField("checkPass"),i())};return{activeName:"first",LoginForm:{id:"",pwd:""},rule:{id:[{required:!0,max:14,min:2,message:"用户名是必须的，长度为2-14位",trigger:"blur"}],pwd:[{required:!0,message:"密码是必须的！",trigger:"blur",validator:t}]},imageUrl:o("298d"),fit:"cover"}},methods:{submit:function(e){var t=this,o={d_id:this.LoginForm.id,d_Password:this.LoginForm.pwd};this.$axios({url:x["a"].loginUrl,method:"post",data:o,dataType:"text",contentType:"application/json;charset=UTF-8"}).then(function(e){console.log(e.data),console.log(e.data.status),1==e.data&&(t.$root.doctorid=t.LoginForm.id,console.log(t.$root.doctorid),t.$router.push("/home"))})}}}),M=A,U=(o("73bb"),Object(l["a"])(M,D,F,!1,null,"3d8cce9b",null)),L=U.exports,j=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[o("el-table-column",{attrs:{fixed:"",prop:"p_id",label:"编号",width:"100"}}),o("el-table-column",{attrs:{fixed:"",prop:"p_name",label:"患者",width:"100"}}),o("el-table-column",{attrs:{fixed:"",prop:"p_sex",label:"性别",width:"100"}}),o("el-table-column",{attrs:{fixed:"",prop:"p_age",label:"年龄",width:"100"}}),o("el-table-column",{attrs:{fixed:"",prop:"d_name",label:"所属医生",width:"100"}}),o("el-table-column",{attrs:{fixed:"",prop:"d_institution",label:"科室",width:"100"}}),o("el-table-column",{attrs:{fixed:"",prop:"detail",label:"患者详情",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){return e.view(t.row)}}},[e._v("查看详情")])]}}])}),o("el-table-column",{attrs:{prop:"caozuo",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{ref:"btn1",attrs:{type:"text",size:"small"},on:{click:function(o){return e.open(o,t.row)}}},[e._v("创建远程听诊")])]}}])}),o("el-table-column",{attrs:{prop:"shishi",label:"实时听诊",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{ref:"btn2",attrs:{type:"text",size:"small"},on:{click:function(o){return e.connect(o,t.row)}}},[e._v("实时听诊")])]}}])})],1),o("el-dialog",{attrs:{title:"实时听诊",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("div",{staticStyle:{width:"400px",margin:"0 auto"},attrs:{id:"container"}},[o("el-button",{on:{click:function(t){return e.loadPCM()}}},[e._v("播 放")]),o("el-button",{attrs:{disabled:e.btnf},on:{click:e.pause}},[e._v("暂停播放")]),o("el-button",{attrs:{disabled:e.btnf},on:{click:e.continuePlay}},[e._v("继续播放")]),o("el-button",{on:{click:e.end}},[e._v("断开连接")])],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("关 闭")])],1)])],1)},R=[],B=o("d78f"),N=B["a"],q=Object(l["a"])(N,j,R,!1,null,null,null),V=q.exports,W=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"编号"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form.p_id,callback:function(t){e.$set(e.form,"p_id",t)},expression:"form.p_id"}})],1),o("el-form-item",{attrs:{label:"姓名"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form.p_name,callback:function(t){e.$set(e.form,"p_name",t)},expression:"form.p_name"}})],1),o("el-form-item",{attrs:{label:"性别"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form.p_sex,callback:function(t){e.$set(e.form,"p_sex",t)},expression:"form.p_sex"}})],1),o("el-form-item",{attrs:{label:"年龄"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form.p_age,callback:function(t){e.$set(e.form,"p_age",t)},expression:"form.p_age"}})],1),o("el-form-item",{attrs:{label:"所属医生"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form.d_name,callback:function(t){e.$set(e.form,"d_name",t)},expression:"form.d_name"}})],1),o("el-form-item",{attrs:{label:"科室"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form.d_institution,callback:function(t){e.$set(e.form,"d_institution",t)},expression:"form.d_institution"}})],1),o("el-form-item",{attrs:{label:"住院号"}},[o("el-input",{attrs:{disabled:!0},model:{value:e.form.p_hospNum,callback:function(t){e.$set(e.form,"p_hospNum",t)},expression:"form.p_hospNum"}})],1),o("el-form-item",{attrs:{label:"诊断结果"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),o("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)},K=[],H={data:function(){return{form:{p_id:this.$route.params.p_id,p_name:this.$route.params.p_name,p_age:this.$route.params.p_age,p_sex:this.$route.params.p_sex,d_name:this.$route.params.d_name,d_institution:this.$route.params.d_institution,p_hospNum:this.$route.params.p_hospNum,desc:""}}},created:function(){var e=this;console.log(e.form.p_id),void 0==this.$route.params.p_id&&(e.form.p_id=sessionStorage.getItem("p_id"),e.form.p_name=sessionStorage.getItem("p_name"),e.form.p_age=sessionStorage.getItem("p_age"),e.form.p_hospNum=sessionStorage.getItem("p_hospNum"),e.form.p_sex=sessionStorage.getItem("p_sex"),e.form.d_name=sessionStorage.getItem("d_name"),e.form.d_institution=sessionStorage.getItem("d_institution")),console.log(e.form.p_id),window.addEventListener("beforeunload",function(){sessionStorage.setItem("p_id",e.form.p_id),sessionStorage.setItem("p_name",e.form.p_name),sessionStorage.setItem("p_hospNum",e.form.p_hospNum),sessionStorage.setItem("p_age",e.form.p_age),sessionStorage.setItem("p_sex",e.form.p_sex),sessionStorage.setItem("d_name",e.form.d_name),sessionStorage.setItem("d_institution",e.form.d_institution),console.log(sessionStorage.getItem("p_id"))})},methods:{cancel:function(){this.$router.push("/Home/HomePage")},onSubmit:function(){console.log("submit!"),console.log(this.form),console.log(this.$route.params),this.$router.push("/Home/HomePage")}}},z=H,G=Object(l["a"])(z,W,K,!1,null,null,null),J=G.exports;i["default"].use(p["a"]);var Y=new p["a"]({routes:[{path:"/home",name:"Home",component:g,children:[{path:"HomePage",name:"HomePage",component:V}]},{path:"/",name:"Login",component:L},{path:"/detail",name:"detail",component:J},{path:"/voicedata",name:"voicedata",component:O}]}),Q=o("2f62");i["default"].use(Q["a"]);var X=new Q["a"].Store({state:{},mutations:{},actions:{}}),Z=o("5c96"),ee=o.n(Z);o("c69f");i["default"].use(ee.a);var te=o("313e"),oe=o.n(te);i["default"].prototype.$echarts=oe.a,i["default"].prototype.$axios=y.a,i["default"].config.productionTip=!1,new i["default"]({router:Y,store:X,axios:y.a,data:function(){return{doctorid:""}},render:function(e){return e(u)}}).$mount("#app")},"64a9":function(e,t,o){},"73bb":function(e,t,o){"use strict";var i=o("3f24"),n=o.n(i);n.a},c69f:function(e,t,o){},cccb:function(e,t,o){"use strict";var i=o("d563"),n=o.n(i);n.a},d563:function(e,t,o){},d78f:function(module,__webpack_exports__,__webpack_require__){"use strict";var regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_0__),D_HospitalManagementSystem_master_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("3b8d"),axios__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_2__),_http_api__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("f96b"),_http_pcm__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("012b"),_http_socket__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("3238");__webpack_exports__["a"]={name:"homepage",data:function(){return{patient_id:"",ws:null,dialogFormVisible:!1,btnf:!0,stuname:"肺音数据",newData:[],tableData:[]}},created:function(){var e=this,t=this;console.log(this.$root.doctorid);var o=this.$root.doctorid;sessionStorage.getItem("d_id")&&(o=sessionStorage.getItem("d_id"),this.$root.doctorid=o),console.log(this.$root.doctorid),this.$axios.get(_http_api__WEBPACK_IMPORTED_MODULE_3__["a"].registerUrl+"/"+o).then(function(e){console.info(e.data),t.tableData=e.data}).catch(function(e){console.info(e)}),window.addEventListener("beforeunload",function(){e.$root.doctorid=sessionStorage.getItem("d_id"),console.log(e.$root.doctorid)})},methods:{open:function(e,t){var o=this;"创建远程听诊"==e.target.innerText?this.$confirm("您确定创建远程肺音听诊?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.$message({type:"success",message:"创建成功!"}),console.log(e.target.innerText);var t=o.stuname;e.target.innerText=t}).catch(function(){o.$message({type:"info",message:"已取消"})}):"肺音数据"==e.target.innerText&&this.$router.push({name:"voicedata",params:{p_id:t.p_id,p_name:t.p_name,p_age:t.p_age,p_sex:t.p_sex,p_hospNum:t.p_hospNum,d_institution:t.d_institution}})},view:function(e){console.log(e),console.log(e.p_id),console.log(e.p_name),console.log(e.p_age),this.$router.push({name:"detail",params:{p_id:e.p_id,p_name:e.p_name,p_age:e.p_age,p_sex:e.p_sex,d_name:e.d_name,p_hospNum:e.p_hospNum,d_institution:e.d_institution}})},connect:function(e,t){this.dialogFormVisible=!0,this.ws=new WebSocket(_http_api__WEBPACK_IMPORTED_MODULE_3__["a"].socketURL+"/"+this.$root.doctorid),this.ws.binaryType="arraybuffer",this.patient_id=t.p_id,console.log(this.patient_id),console.log(t.p_id),console.log(t)},loadPCM:function loadPCM(row){var that=this,player=new _http_pcm__WEBPACK_IMPORTED_MODULE_4__["a"]({inputCodec:"Int16",channels:2,sampleRate:8e3,flushTime:200});console.log(that.p_id);var messageObj={messageType:1,textmessage:"start",fromUsername:this.$root.doctorid,toUsername:this.patient_id};console.log(messageObj),that.ws.send(JSON.stringify(messageObj)),that.ws.addEventListener("message",function(event){console.log(event.data);var message=eval("("+event.data+")");if(console.log(message),3==message.messageType)console.log(message),that.$message("对方尚未建立连接请稍后再试");else{var voice=window.atob(message.textmessage);player.feed(voice),that.btnf=!0}})},changeVolume:function(e){player.volume(document.querySelector("#range").value)},pause:function(){var e=Object(D_HospitalManagementSystem_master_node_modules_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,player.pause();case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),continuePlay:function(){player.continue()},end:function(){console.log("断开"),this.ws.close(),console.log("Close"+this.ws.readyState)}}}},eb70:function(e,t,o){e.exports=o.p+"img/logoPic.82e629a1.jpg"},f96b:function(e,t,o){"use strict";var i="http://129.204.188.223:8084/lung/",n=i+"/hims/prescription/submit",a=i+"/hims/prescription/search",r=i+"/hims/clinic/clinic_form/search",s=i+"/hims/clinic/clinic_form",l=i+"/hims/clinic/retreats",c=i+"/hims/clinic/retreat",u=i+"/hims/clinic/clinic_register",p=i+"/hims/clinic/departments",d=i+"/hims/clinic/doctors",m=i+"/download",_=i+"/enter",f="ws://129.204.188.223:8084/lung//websocket",h=i+"/getFile",g=i+"/hims/prescription/medications",b=i+"/hims/prescription/refund",v=i+"/getPatientMessage";t["a"]={downloadurl:m,rootUrl:i,createPrescriptionUrl:n,searchPrescriptionUrl:a,searchClinicFormUrl:r,queryClinicFormUrl:s,retreatClinicFormsUrl:l,retreatSingleClinicFormUrl:c,registerClinicFormUrl:u,queryDepartmentsUrl:p,queryDoctors:d,loginUrl:_,registerUrl:v,removeMedicationUrl:h,queryMedicationsUrl:g,fullRefundPrescriptionUrl:b,socketURL:f}}});
//# sourceMappingURL=app.cd21d32f.js.map